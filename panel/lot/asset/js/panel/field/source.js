/*!
 * ==============================================================
 *  TEXT EDITOR 3.1.2
 * ==============================================================
 * Author: Taufik Nurrohman <https://github.com/taufik-nurrohman>
 * License: MIT
 * --------------------------------------------------------------
 */
!function(n,t,e){function r(n){return n.length}function u(n){return n instanceof Array}function i(n){return"function"==typeof n}function a(n){return n instanceof RegExp?n.source||!0:!1}function o(n){return void 0!==n}function f(n){return"string"==typeof n}function c(t){if(u(t)){var r,i=[];for(r in t)i[r]=c(t[r]);return i}return t[y](l("["+n[e].x[y](/./g,"\\$&")+"]","g"),"\\$&")}function l(n,t){return a(n)||RegExp(n,t)}function s(n,t){return n["trim"+(-1===t?"Left":1===t?"Right":"")]()}var v="Selection",p="blur",d="focus",g="insert",b="__instance__",h="match",m="parentNode",y="replace",S="scroll",w=S+"Left",_=S+"Top",E="select",x=E+"ion",O=x+"End",R=x+"Start",T="substring",L=setTimeout;!function(e){e._=e.prototype,e.version="3.1.2",e[b]={},e.each=function(n,t){var r,u;return L(function(){u=$[b];for(r in u)n.call(u[r],r)},0===t?0:t||1),e},e.x="!$^*()-=+[]{}\\|:<>,./?",e.esc=c,e[v]=function(n,t,e){var u,i=this;i.start=n,i.end=t,i.value=u=e[T](n,t),i.before=e[T](0,n),i.after=e[T](t),i.length=r(u),i.toString=function(){return u}};var u=t.currentScript;e.path=(u&&u.src||n.location.href).split("/").slice(0,-1).join("/")}(n[e]=function($,x){function T(){return $.value[y](/\r/g,"")}if($){var L=this,j=n[e],k=/^([\s\S]*?)$/,C=t.body,A=C[m];if($[e])return L;if(x=x||{},f(x)&&(x={tab:x}),o(x.tab)||(x.tab="	"),L.state=x,!(L instanceof j))return new j($,x);j[b][$.id||$.name||r(Object.keys(j[b]))]=L,L.self=L.source=$,L.value=T(),L.get=function(){return!$.disabled&&s($.value)||null},L.let=function(){return $.value=L.value,L},L.set=function(n){return $.disabled||$.readOnly?L:($.value=n,L)},L.$=function(){var n=new j[v]($[R],$[O],T());return n},L[d]=function(n){var t,e;return-1===n?t=e=0:1===n&&(t=r(T()),e=$[S+"Height"]),o(t)&&o(e)&&($[R]=$[O]=t,$[_]=e),$[d](),L},L[p]=function(){return $[p](),L},L[E]=function(){var t,e,u,i=arguments,a=r(i),o=L.$();if(t=n.pageXOffset||A[w]||C[w],e=n.pageYOffset||A[_]||C[_],u=$[_],0===a)i[0]=o.start,i[1]=o.end;else if(1===a){if(!0===i[0])return $[d](),$[E](),L;i[1]=i[0]}return $.disabled?L:($[d](),$.setSelectionRange(i[0],i[1]),$[_]=u,n.scroll(t,e),L)},L[h]=function(n,t){if(u(n)){var e=L.$(),r=[e.before[h](n[0]),e.value[h](n[1]),e.after[h](n[2])];return i(t)?t.call(L,r[0]||[],r[1]||[],r[2]||[]):[!!r[0],!!r[1],!!r[2]]}var r=L.$().value[h](n);return i(t)?t.call(L,r||[]):!!r},L[y]=function(n,t,e){var u=L.$(),i=u.before,a=u.after,o=u.value;return-1===e?i=i[y](n,t):1===e?a=a[y](n,t):o=o[y](n,t),L.set(i+o+a)[E](i=r(i),i+r(o))},L[g]=function(n,t,e){var r=k;return e&&L[y](r,""),-1===t?r=/$/:1===t&&(r=/^/),L[y](r,n,t)},L.wrap=function(n,t,e){var u=L.$(),i=u.before,a=u.after,o=u.value;return e?L[y](k,n+"$1"+t):L.set(i+n+o+t+a)[E](i=r(i+n),i+r(o))},L.peel=function(n,t,e){var u=L.$(),i=u.before,o=u.after,f=u.value;n=a(n)||c(n),t=a(t)||c(t);var s=l(n+"$"),v=l("^"+t);return e?L[y](l("^"+n+"([\\s\\S]*?)"+t+"$"),"$1"):s.test(i)&&v.test(o)?(i=i[y](s,""),o=o[y](v,""),L.set(i+f+o)[E](i=r(i),i+r(f))):L[E]()},L.pull=function(n,t){var e=L.$();return n=o(n)?n:x.tab,n=a(n)||c(n),o(t)||(t=!0),r(e)?t?L[y](l("^"+n,"gm"),""):L[g](e.value.split("\n").map(function(t){return l("^("+n+")*$").test(t)?t:t[y](l("^"+n),"")}).join("\n")):L[y](l(n+"$"),"",-1)},L.push=function(n,t){var e=L.$();return n=o(n)?n:x.tab,o(t)||(t=!1),r(e)?L[y](l("^"+(t?"":"(?!$)"),"gm"),n):L[g](n,-1)},L.trim=function(n,t,e,u,i){o(i)||(i=!0),null!==n&&!1!==n&&(n=n||""),null!==t&&!1!==t&&(t=t||""),null!==e&&!1!==e&&(e=e||""),null!==u&&!1!==u&&(u=u||"");var a=L.$(),f=a.before,c=a.after,l=a.value,v=s(f,1),$=s(c,-1);return f=!1!==n?s(f,1)+(v||!i?n:""):f,c=!1!==t?($||!i?t:"")+s(c,-1):c,!1!==e&&(l=s(l,-1)),!1!==u&&(l=s(l,1)),L.set(f+l+c)[E](f=r(f),f+r(l))}}})}(window,document,"TE");
/*!
 * ==============================================================
 *  TEXT EDITOR HISTORY 1.1.0
 * ==============================================================
 * Author: Taufik Nurrohman <https://github.com/taufik-nurrohman>
 * License: MIT
 * --------------------------------------------------------------
 */
!function(t,n,e){function r(t,n,e){return u(n)&&n>t?n:u(e)&&t>e?e:t}function u(t){return void 0!==t}var i=t[e],a=i._,o="_history",c=o+"State";a[o]=[],a[c]=-1,a.history=function(t){var n=this;return u(t)?u(n[o][t])?n[o][t]:null:n[o]},a.record=function(t){var n=this,e=n.$(),r=n[o][n[c]]||[],i=[n.self.value,e.start,e.end];return i[0]===r[0]&&i[1]===r[1]&&i[2]===r[2]?n:(++n[c],n[o][u(t)?t:n[c]]=i,n)},a.loss=function(t){var n,e=this;return!0===t?(e[o]=[],e[c]=-1,[]):(n=e[o].splice(u(t)?t:e[c],1),e[c]=r(e[c]-1,-1),n)},a.undo=function(){var t,n=this;return n[c]=r(n[c]-1,0,n[o].length-1),t=n[o][n[c]],n.set(t[0]).select(t[1],t[2])},a.redo=function(){var t,n=this;return n[c]=r(n[c]+1,0,n[o].length-1),t=n[o][n[c]],n.set(t[0]).select(t[1],t[2])}}(window,document,"TE");
/*!
 * ==============================================================
 *  TEXT EDITOR SOURCE 1.1.1
 * ==============================================================
 * Author: Taufik Nurrohman <https://github.com/taufik-nurrohman>
 * License: MIT
 * --------------------------------------------------------------
 */
!function(e,t,n){function o(e,t,n){e.removeEventListener(t,n)}function r(e,t,n){e.addEventListener(t,n,!1)}function a(e,t){return Object.assign(e,t)}function c(e){return"function"==typeof e}function u(e){e&&e.preventDefault()}var i,s,f=e[n],l=setTimeout,p=f.esc,d="blur",v="close",h="ctrlKey",y="focus",b="fromCharCode",m="indexOf",w="lastIndexOf",g="keydown",E="match",$="mousedown",k="mouseup",x="pull",C="push",L="record",O="redo",_="replace",K="select",R="shiftKey",T="toLowerCase",j="touch",z=j+"end",D=j+"start",I="undo";i=function(e,t){function i(){l(function(){{var e=W.$(),t=/\W/g,n=".",o=e.before[_](t,n)[w](n),r=e.after[_](t,n)[m](n);e.value}o=0>o?0:o+1,r=0>r?e.after.length:r,H!==e.start&&W[K](o,e.end+r)},0)}function s(){H=W.$().start}function j(e){var n=J[v],o=t.tab,r=e.keyCode,a=(e.key||String[b](r))[T](),c=e[h],i="enter"===a||13===r,s=e[R],f="tab"===a||9===r,m=W.$(),w=m.before,g=m.value,$=m.after,k=w.slice(-1),L=$.slice(0,1),_=w[E](RegExp("(?:^|\\n)("+p(o)+"+).*$")),j=_?_[1]:"",z=n[a];c?A&&("z"===a||90===r?(W[I](),u(e)):("y"===a||89===r)&&(W[O](),u(e))):f?(W[s?x:C](o),S(),u(e)):"\\"!==k&&a===L?(W[K](m.end+1),S(),u(e)):"\\"!==k&&z?(S(),W.wrap(a,z),S(),u(e)):"backspace"===a||8===r?(!g&&w[E](RegExp(p(o)+"$"))?(W[x](o),u(e)):(z=n[k],z&&z===L&&(W.peel(k,L),u(e))),S()):"delete"===a||46===r?(z=n[k],z&&z===L&&(W.peel(k,L),u(e)),S()):i?(z=n[k],z&&z===L?(W.wrap("\n"+o+j,"\n"+j)[d]()[y](),u(e)):(g||j)&&(W.insert("\n",-1,!0)[C](j)[d]()[y](),u(e)),S()):l(S,0)}function S(){A&&W[L]()}var W=this,q=W.pop,A=I in f._;f.call(this,e,t);var B="source",t=W.state,F={},G=!(B in t)||t[B];F[v]={"(":")","{":"}","[":"]",'"':'"',"'":"'","<":">"},F[K]=!0,G&&(t[B]=a(F,!0===t[B]?{}:t[B]));var H,J=t[B]||{};G&&(r(e,g,j),J[K]&&(r(e,$,i),r(e,k,s),r(e,z,s),r(e,D,i)),S()),W.pop=function(){return c(q)&&q.call(W),o(e,g,j),o(e,$,i),o(e,k,s),o(e,z,s),o(e,D,i),delete e[n],A&&W[loss](!0),W},W.state=t};for(s in f)i[s]=f[s];i.prototype=i._=f._,e[n]=i}(window,document,"TE");


(function(doc) {
    var source = doc.querySelectorAll('.field\\:source .textarea'), $$;
    source.length && source.forEach(function($) {
        $$ = new TE($, JSON.parse($.getAttribute('data-state') || '{}'));
    });
})(document);