/*!
 * ==============================================================
 *  TEXT EDITOR 3.1.4
 * ==============================================================
 * Author: Taufik Nurrohman <https://github.com/taufik-nurrohman>
 * License: MIT
 * --------------------------------------------------------------
 */
!function(n,t,e){function r(n){return n.length}function u(n){return n instanceof Array}function i(n){return"function"==typeof n}function f(n){return n instanceof RegExp?n.source||!0:!1}function o(n){return void 0!==n}function a(n){return"string"==typeof n}function c(t){if(u(t)){var r,i=[];for(r in t)i[r]=c(t[r]);return i}return t[w](l("["+n[e].x[w](/./g,"\\$&")+"]","g"),"\\$&")}function l(n,t){return f(n)||RegExp(n,t)}function s(n,t){return n["trim"+(-1===t?"Left":1===t?"Right":"")]()}var v="__instance__",p="Selection",g="blur",b="disabled",d="focus",h="insert",m="match",y="parentNode",S="readOnly",w="replace",_="scroll",x=_+"Left",E=_+"Top",O="select",R=O+"ion",j=R+"End",T=R+"Start",L="substring",k=setTimeout;!function(e){e._=e.prototype,e.version="3.1.4",e[v]={},e.each=function(n,t){var r,u;return k(function(){u=$[v];for(r in u)n.call(u[r],r)},0===t?0:t||1),e},e.x="!$^*()-=+[]{}\\|:<>,./?",e.esc=c,e[p]=function(n,t,e){var u,i=this;i.start=n,i.end=t,i.value=u=e[L](n,t),i.before=e[L](0,n),i.after=e[L](t),i.length=r(u),i.toString=function(){return u}};var u=t.currentScript;e.path=(u&&u.src||n.location.href).split("/").slice(0,-1).join("/")}(n[e]=function($,R){function L(){return $.value[w](/\r/g,"")}if($){var k=this,A=n[e],H=/^([\s\S]*?)$/,N=t.body,X=N[y];if($[e])return k;if(R=R||{},a(R)&&(R={tab:R}),o(R.tab)||(R.tab="	"),k.state=R,!(k instanceof A))return new A($,R);A[v][$.id||$.name||r(Object.keys(A[v]))]=k,k.self=k.source=$,k.value=L(),k.get=function(){return!$[b]&&s($.value)||null},k.let=function(){return $.value=k.value,k},k.set=function(n){return $[b]||$[S]?k:($.value=n,k)},k.$=function(){var n=new A[p]($[T],$[j],L());return n},k[d]=function(n){var t,e;return-1===n?t=e=0:1===n&&(t=r(L()),e=$[_+"Height"]),o(t)&&o(e)&&($[T]=$[j]=t,$[E]=e),$[d](),k},k[g]=function(){return $[g](),k},k[O]=function(){if($[b]||$[S])return $[d](),k;var t,e,u,i=arguments,f=r(i),o=k.$();if(t=n.pageXOffset||X[x]||N[x],e=n.pageYOffset||X[E]||N[E],u=$[E],0===f)i[0]=o.start,i[1]=o.end;else if(1===f){if(!0===i[0])return $[d](),$[O](),k;i[1]=i[0]}return $[d](),$.setSelectionRange(i[0],i[1]),$[E]=u,n.scroll(t,e),k},k[m]=function(n,t){if(u(n)){var e=k.$(),r=[e.before[m](n[0]),e.value[m](n[1]),e.after[m](n[2])];return i(t)?t.call(k,r[0]||[],r[1]||[],r[2]||[]):[!!r[0],!!r[1],!!r[2]]}var r=k.$().value[m](n);return i(t)?t.call(k,r||[]):!!r},k[w]=function(n,t,e){var u=k.$(),i=u.before,f=u.after,o=u.value;return-1===e?i=i[w](n,t):1===e?f=f[w](n,t):o=o[w](n,t),k.set(i+o+f)[O](i=r(i),i+r(o))},k[h]=function(n,t,e){var r=H;return e&&k[w](r,""),-1===t?r=/$/:1===t&&(r=/^/),k[w](r,n,t)},k.wrap=function(n,t,e){var u=k.$(),i=u.before,f=u.after,o=u.value;return e?k[w](H,n+"$1"+t):k.set(i+n+o+t+f)[O](i=r(i+n),i+r(o))},k.peel=function(n,t,e){var u=k.$(),i=u.before,o=u.after,a=u.value;n=f(n)||c(n),t=f(t)||c(t);var s=l(n+"$"),v=l("^"+t);return e?k[w](l("^"+n+"([\\s\\S]*?)"+t+"$"),"$1"):s.test(i)&&v.test(o)?(i=i[w](s,""),o=o[w](v,""),k.set(i+a+o)[O](i=r(i),i+r(a))):k[O]()},k.pull=function(n,t){var e=k.$();return n=o(n)?n:R.tab,n=f(n)||c(n),o(t)||(t=!0),r(e)?t?k[w](l("^"+n,"gm"),""):k[h](e.value.split("\n").map(function(t){return l("^("+n+")*$").test(t)?t:t[w](l("^"+n),"")}).join("\n")):k[w](l(n+"$"),"",-1)},k.push=function(n,t){var e=k.$();return n=o(n)?n:R.tab,o(t)||(t=!1),r(e)?k[w](l("^"+(t?"":"(?!$)"),"gm"),n):k[h](n,-1)},k.trim=function(n,t,e,u,i){o(i)||(i=!0),null!==n&&!1!==n&&(n=n||""),null!==t&&!1!==t&&(t=t||""),null!==e&&!1!==e&&(e=e||""),null!==u&&!1!==u&&(u=u||"");var f=k.$(),a=f.before,c=f.after,l=f.value,v=s(a,1),$=s(c,-1);return a=!1!==n?s(a,1)+(v||!i?n:""):a,c=!1!==t?($||!i?t:"")+s(c,-1):c,!1!==e&&(l=s(l,-1)),!1!==u&&(l=s(l,1)),k.set(a+l+c)[O](a=r(a),a+r(l))},k.pop=function(){return delete $[e],k}}})}(window,document,"TE");
/*!
 * ==============================================================
 *  TEXT EDITOR HISTORY 1.1.0
 * ==============================================================
 * Author: Taufik Nurrohman <https://github.com/taufik-nurrohman>
 * License: MIT
 * --------------------------------------------------------------
 */
!function(t,n,e){function r(t,n,e){return u(n)&&n>t?n:u(e)&&t>e?e:t}function u(t){return void 0!==t}var i=t[e],a=i._,o="_history",c=o+"State";a[o]=[],a[c]=-1,a.history=function(t){var n=this;return u(t)?u(n[o][t])?n[o][t]:null:n[o]},a.record=function(t){var n=this,e=n.$(),r=n[o][n[c]]||[],i=[n.self.value,e.start,e.end];return i[0]===r[0]&&i[1]===r[1]&&i[2]===r[2]?n:(++n[c],n[o][u(t)?t:n[c]]=i,n)},a.loss=function(t){var n,e=this;return!0===t?(e[o]=[],e[c]=-1,[]):(n=e[o].splice(u(t)?t:e[c],1),e[c]=r(e[c]-1,-1),n)},a.undo=function(){var t,n=this;return n[c]=r(n[c]-1,0,n[o].length-1),t=n[o][n[c]],n.set(t[0]).select(t[1],t[2])},a.redo=function(){var t,n=this;return n[c]=r(n[c]+1,0,n[o].length-1),t=n[o][n[c]],n.set(t[0]).select(t[1],t[2])}}(window,document,"TE");
/*!
 * ==============================================================
 *  TEXT EDITOR SOURCE 1.1.3
 * ==============================================================
 * Author: Taufik Nurrohman <https://github.com/taufik-nurrohman>
 * License: MIT
 * --------------------------------------------------------------
 */
!function(e,n,t){function r(e,n,t){e.removeEventListener(n,t)}function u(e,n,t){e.addEventListener(n,t,!1)}function o(e,n){return Object.assign(e,n)}function i(e){e&&e.preventDefault()}var a,f,c=e[t],l=setTimeout,s=c.esc,v="blur",p="close",d="ctrlKey",$="disabled",g="focus",b="fromCharCode",h="indexOf",m="lastIndexOf",y="keydown",w="match",E="mousedown",S="mouseup",_="pull",x="push",O="readOnly",R="record",T="redo",L="replace",k="select",j="shiftKey",C="toLowerCase",K="touch",A=K+"end",H=K+"start",N="undo";a=function(e,n){function t(){e[$]||e[O]||l(function(){{var e=X.$(),n=/\W/g,t=".",r=e.before[L](n,t)[m](t),u=e.after[L](n,t)[h](t);e.value}r=0>r?0:r+1,u=0>u?e.after.length:u,q!==e.start&&X[k](r,e.end+u)},0)}function a(){q=X.$().start}function f(t){if(!e[$]&&!e[O]){var r=B[p],u=n.tab,o=t.keyCode,a=(t.key||String[b](o))[C](),f=t[d],c="enter"===a||13===o,h=(t[j],X.$()),m=h.before,y=h.value,E=h.after,S=m.slice(-1),R=E.slice(0,1),L=m[w](RegExp("(?:^|\\n)("+s(u)+"+).*$")),A=L?L[1]:"",H=r[a];f?"z"===a||90===o?(X[N](),K(),i(t)):"y"===a||89===o?(X[T](),K(),i(t)):"]"===a||221===o?(X[x](u),K(),i(t)):("["===a||219===o)&&(X[_](u),K(),i(t)):"\\"!==S&&a===R?(X[k](h.end+1),K(),i(t)):"\\"!==S&&H?(K(),X.wrap(a,H),K(),i(t)):"backspace"===a||8===o?(!y&&m[w](RegExp(s(u)+"$"))?(X[_](u),K(),i(t)):(H=r[S],H&&H===R&&(X.peel(S,R),i(t))),K()):"delete"===a||46===o?(H=r[S],H&&H===R&&(X.peel(S,R),i(t)),K()):c?(H=r[S],H&&H===R?(X.wrap("\n"+u+A,"\n"+A)[v]()[g](),i(t)):(y||A)&&(X.insert("\n",-1,!0)[x](A)[v]()[g](),i(t)),K()):l(K,0)}}function K(){z&&X[R]()}var X=this,Y=X.pop,z=N in c._;c.call(X,e,n);var D="source",n=X.state,I={},W=!(D in n)||n[D];I[p]={"(":")","{":"}","[":"]",'"':'"',"'":"'","<":">"},I[k]=!0,W&&(n[D]=o(I,!0===n[D]?{}:n[D]));var q,B=n[D]||{};W&&(u(e,y,f),B[k]&&(u(e,E,t),u(e,S,a),u(e,A,a),u(e,H,t)),K()),X.pop=function(){return Y.call(X),r(e,y,f),r(e,E,t),r(e,S,a),r(e,A,a),r(e,H,t),z&&X[loss](!0),X},X.state=n};for(f in c)a[f]=c[f];a.prototype=a._=c._,e[t]=a}(window,document,"TE");


(function(doc) {
    var source = doc.querySelectorAll('.field\\:source .textarea'), $$;
    source.length && source.forEach(function($) {
        $$ = new TE($, JSON.parse($.getAttribute('data-state') || '{}'));
    });
})(document);