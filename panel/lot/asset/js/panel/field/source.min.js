/*!
 * ==============================================================
 *  TEXT EDITOR 3.1.8
 * ==============================================================
 * Author: Taufik Nurrohman <https://github.com/taufik-nurrohman>
 * License: MIT
 * --------------------------------------------------------------
 */
!function(e,t,n){var r,u="replace";function o(e){return e.length}function s(e){return e instanceof Array}function i(e){return"function"==typeof e}function c(e){return e instanceof RegExp&&(e.source||!0)}function a(e){return void 0!==e}function l(t){if(s(t)){var r,o=[];for(r in t)o[r]=l(t[r]);return o}return t[u](f("["+e[n].x[u](/./g,"\\$&")+"]","g"),"\\$&")}function f(e,t){return c(e)||new RegExp(e,t)}function v(e,t){return e["trim"+(-1===t?"Left":1===t?"Right":"")]()}e.setTimeout,(r=e[n]=function(r,d){if(r){var p=this,h=e[n],g=/^([\s\S]*?)$/,b=t.body,$=b.parentNode,y=Object.assign({},h.state,"string"==typeof d?{tab:d}:d||{});if(r[n])return p;if(!(p instanceof h))return new h(r,y);h.instances[r.id||r.name||o(Object.keys(h.instances))]=p,p.self=p.source=r,p.value=m(),p.get=function(){return!r.disabled&&v(r.value)||null},p.let=function(){return r.value=p.value,p},p.set=function(e){return r.disabled||r.readOnly?p:(r.value=e,p)},p.$=function(){return new h.Selection(r.selectionStart,r.selectionEnd,m())},p.focus=function(e){var t,n;return-1===e?t=n=0:1===e&&(t=o(m()),n=r.scrollHeight),a(t)&&a(n)&&(r.selectionStart=r.selectionEnd=t,r.scrollTop=n),r.focus(),p},p.blur=function(){return r.blur(),p},p.select=function(){if(r.disabled||r.readOnly)return r.focus(),p;var t,n,u,s=arguments,i=o(s),c=p.$();if(t=e.pageXOffset||$.scrollLeft||b.scrollLeft,n=e.pageYOffset||$.scrollTop||b.scrollTop,u=r.scrollTop,0===i)s[0]=c.start,s[1]=c.end;else if(1===i){if(!0===s[0])return r.focus(),r.select(),p;s[1]=s[0]}return r.focus(),r.selectionStart=s[0],r.selectionEnd=s[1],r.scrollTop=u,e.scroll(t,n),p},p.match=function(e,t){if(s(e)){var n=p.$(),r=[n.before.match(e[0]),n.value.match(e[1]),n.after.match(e[2])];return i(t)?t.call(p,r[0]||[],r[1]||[],r[2]||[]):[!!r[0],!!r[1],!!r[2]]}return r=p.$().value.match(e),i(t)?t.call(p,r||[]):!!r},p[u]=function(e,t,n){var r=p.$(),s=r.before,i=r.after,c=r.value;return-1===n?s=s[u](e,t):1===n?i=i[u](e,t):c=c[u](e,t),p.set(s+c+i).select(s=o(s),s+o(c))},p.insert=function(e,t,n){var r=g;return n&&p[u](r,""),-1===t?r=/$/:1===t&&(r=/^/),p[u](r,e,t)},p.wrap=function(e,t,n){var r=p.$(),s=r.before,i=r.after,c=r.value;return n?p[u](g,e+"$1"+t):p.set(s+e+c+t+i).select(s=o(s+e),s+o(c))},p.peel=function(e,t,n){var r=p.$(),s=r.before,i=r.after,a=r.value;e=c(e)||l(e),t=c(t)||l(t);var v=f(e+"$"),d=f("^"+t);return n?p[u](f("^"+e+"([\\s\\S]*?)"+t+"$"),"$1"):v.test(s)&&d.test(i)?(s=s[u](v,""),i=i[u](d,""),p.set(s+a+i).select(s=o(s),s+o(a))):p.select()},p.pull=function(e,t){var n=p.$();return e=c(e=a(e)?e:y.tab)||l(e),a(t)||(t=!0),o(n)?t?p[u](f("^"+e,"gm"),""):p.insert(n.value.split("\n").map(function(t){return f("^("+e+")*$").test(t)?t:t[u](f("^"+e),"")}).join("\n")):p[u](f(e+"$"),"",-1)},p.push=function(e,t){var n=p.$();return e=a(e)?e:y.tab,a(t)||(t=!1),o(n)?p[u](f("^"+(t?"":"(?!$)"),"gm"),e):p.insert(e,-1)},p.trim=function(e,t,n,r,u){a(u)||(u=!0),null!==e&&!1!==e&&(e=e||""),null!==t&&!1!==t&&(t=t||""),null!==n&&!1!==n&&(n=n||""),null!==r&&!1!==r&&(r=r||"");var s=p.$(),i=s.before,c=s.after,l=s.value,f=v(i,1),d=v(c,-1);return i=!1!==e?v(i,1)+(f||!u?e:""):i,c=!1!==t?(d||!u?t:"")+v(c,-1):c,!1!==n&&(l=v(l,-1)),!1!==r&&(l=v(l,1)),p.set(i+l+c).select(i=o(i),i+o(l))},p.pop=function(){return delete r[n],p},p.state=y}function m(){return r.value[u](/\r/g,"")}}).version="3.1.8",r.state={tab:"\t"},r.instances={},r.x="!$^*()-=+[]{}\\|:<>,./?",r.esc=l,r.Selection=function(e,t,n){var r,u=this;u.start=e,u.end=t,u.value=r=n.substring(e,t),u.before=n.substring(0,e),u.after=n.substring(t),u.length=o(r),u.toString=function(){return r}},r._=r.prototype}(this,this.document,"TE"),function(e,t,n){function r(e){return void 0!==e}function u(e,t){return r(t[0])&&e<t[0]?t[0]:r(t[1])&&e>t[1]?t[1]:e}var o=e.TE._,s="_history",i=s+"State";o[s]=[],o[i]=-1,o.history=function(e){var t=this;return r(e)?r(t[s][e])?t[s][e]:null:t[s]},o.record=function(e){var t=this,n=t.$(),u=t[s][t[i]]||[],o=[t.self.value,n.start,n.end];return o[0]===u[0]&&o[1]===u[1]&&o[2]===u[2]?t:(++t[i],t[s][r(e)?e:t[i]]=o,t)},o.loss=function(e){var t,n=this;return!0===e?(n[s]=[],n[i]=-1,[]):(t=n[s].splice(r(e)?e:n[i],1),n[i]=u(n[i]-1,[-1]),t)},o.undo=function(){var e,t=this;return t[i]=u(t[i]-1,[0,t[s].length-1]),e=t[s][t[i]],t.set(e[0]).select(e[1],e[2])},o.redo=function(){var e,t=this;return t[i]=u(t[i]+1,[0,t[s].length-1]),e=t[s][t[i]],t.set(e[0]).select(e[1],e[2])}}(this,this.document),function(e,t,n){var r,u,o=e.TE,s=e.setTimeout,i=o.esc,c="blur",a="call",l="close",f="ctrlKey",v="disabled",d="focus",p="fromCharCode",h="indexOf",g="lastIndexOf",b="length",$="match",y="pull",m="push",E="readOnly",T="record",w="redo",S="replace",O="select",k="shiftKey",x="toLowerCase",_="undo";function C(e,t,n){e.removeEventListener(t,n)}function L(e,t,n){e.addEventListener(t,n,!1)}function j(e){e&&e.preventDefault()}function K(e,t){return new RegExp(e,t)}for(u in r=function(e,t){var n=this,r=n.pop,u=_ in o._;o[a](n,e,t);var R,A,N={},q=!("source"in(t=n.state))||t.source;N[l]={"(":")","{":"}","[":"]",'"':'"',"'":"'","<":">"},N[y]=function(e){var t=e.ctrlKey,n=e.key,r=e.keyCode;return t&&(n&&"["===n||r&&219===r)},N[m]=function(e){var t=e.ctrlKey,n=e.key,r=e.keyCode;return t&&(n&&"]"===n||r&&221===r)},N[O]=!0,q&&(t.source=(R=N,A=!0===t.source?{}:t.source,Object.assign(R,A)));var z,D=t.source||{};function H(){e[v]||e[E]||s(function(){var e=n.$(),t=/\W/g,r=e.before[S](t,"|")[g]("|"),u=e.after[S](t,"|")[h]("|");e.value,r=r<0?0:r+1,u=u<0?e.after[b]:u,z!==e.start&&n[O](r,e.end+u)},0)}function I(){z=n.$().start}function J(r){if(!e[v]&&!e[E]){var u=D[l],o=t.tab,h=r.keyCode,g=(r.key||String[p](h))[x](),b=r[f],T="enter"===g||13===h,S=(r[k],n.$()),C=S.before,L=S.value,R=S.after,A=C.slice(-1),N=R.slice(0,1),q=C[$](K("(?:^|\\n)("+i(o)+"+).*$")),z=q?q[1]:"",H=u[g];if(D[m]&&D[m][a](n,r))n[m](o),W(),j(r);else if(D[y]&&D[y][a](n,r))n[y](o),W(),j(r);else if(b)"z"===g||90===h?(n[_](),W(),j(r)):"y"!==g&&89!==h||(n[w](),W(),j(r));else if("\\"!==A&&g===N)n[O](S.end+1),W(),j(r);else if("\\"!==A&&H)W(),n.wrap(g,H),W(),j(r);else if("backspace"===g||8===h){var I="",J="";for(var X in u)I+=X,J+=u[X];I="(["+i(I)+"])",J="(["+i(J)+"])";var Y=C[$](K(I+"\\n(?:"+i(z)+")$")),B=R[$](K("^\\n(?:"+i(z)+")"+J));!L&&Y&&B&&B[1]===u[Y[1]]?(n.trim("",""),W(),j(r)):!L&&C[$](K(i(o)+"$"))?(n[y](o),W(),j(r)):(H=u[A])&&H===N&&(n.peel(A,N),j(r)),W()}else"delete"===g||46===h?((H=u[A])&&H===N&&(n.peel(A,N),j(r)),W()):T?((H=u[A])&&H===N?(n.wrap("\n"+o+z,"\n"+z)[c]()[d](),j(r)):(L||z)&&(n.insert("\n",-1,!0)[m](z)[c]()[d](),j(r)),W()):s(W,0)}}function W(){u&&n[T]()}q&&(L(e,"keydown",J),D[O]&&(L(e,"mousedown",H),L(e,"mouseup",I),L(e,"touchend",I),L(e,"touchstart",H)),W()),n.pop=function(){return r&&r[a](n),C(e,"keydown",J),C(e,"mousedown",H),C(e,"mouseup",I),C(e,"touchend",I),C(e,"touchstart",H),u&&n.loss(!0),n},n.state=t},o)r[u]=o[u];r.prototype=r._=o._,e.TE=r}(this,this.document),function(e,t){function n(){for(let e in TE.instances)TE.instances[e].pop(),delete TE.instances[e];let t,n=e.querySelectorAll(".field\\:source .textarea");n.length&&n.forEach(function(e){t=new TE(e,JSON.parse(e.getAttribute("data-state")||"{}"))})}n(),t.on("change",n)}(document,_);
