!function(e,t,n){function b(e){return t.createElement(e)}function C(e){return Object.keys(e)}function P(e){return C(e).length}var a="__instance__",i=setTimeout,o="innerHTML",r="textContent",l="className",u="classes",s="toLowerCase",c="replace",d="firstChild",f="parentNode",h="nextSibling",g="previousSibling",v="appendChild",w="insertBefore",p="removeChild",m="setAttribute",k="getAttribute",y="preventDefault",x="addEventListener";!function(e){e.version="2.1.3",e[a]={},e.each=function(t,n){return i(function(){var i,n=e[a];for(i in n)t(n[i],i,n)},0===n?0:n||1),e}}(e[n]=function(t,O){function Q(){L.focus()}function B(e){var n,t=e?this:L;i(function(){n=t[r].split(z.join);for(I in n)$.set(n[I])},1)}var L,I,_,$=this,E=Date.now(),R=t.placeholder||"",z={join:", ",max:9999,escape:[",","\n"],alert:!0,text:["Delete “%s”","Duplicate “%s”"],classes:["tags","tag","tags-input","tags-output","tags-view"],update:function(){}},j=b("span"),M=b("span"),T="data-tag";e[n][a][t.id||t.name||P(e[n][a])]=$,O="string"==typeof O?{join:O}:O||{};for(I in z)"undefined"!=typeof O[I]&&(z[I]=O[I]);t[l]=z[u][3],j[l]=z[u][0]+" "+z[u][0]+"-"+E,j[x]("click",Q,!1),j.id=z[u][0]+"-"+(t.id||E),j[o]='<span class="'+z[u][4]+'"></span>',M[l]=z[u][2],M[o]='<span contenteditable spellcheck="false" style="white-space:nowrap;outline:none;"></span><span>'+R+"</span>",t[f][w](j,t[h]||null),j[d][v](M),L=M[d],$.tags={},$.error=0,$.filter=function(e){return(e+"")[c](new RegExp("["+z.join[c](/\s/g,"")+"]|\\s{2,}|^\\s+|\\s+$","g"),"")[s]()},$.update=function(e,n){for(t.value="";(I=j[d][d])&&I[k](T);)j[d][p](I);if(0===e)e=C($.tags);else{for(I in e)_=$.filter(e[I]),_&&($.tags[_]=1);e=C($.tags)}$.tags={};for(I in e)$.set(e[I],n);return z.update($),$},$.reset=function(e){return e=$.filter(e||""),e?delete $.tags[e]:$.tags={},$.update(0,1)},$.set=function(e,n){if(e=$.filter(e),""===e||P($.tags)===z.max)return L[o]="",$;var a=b("span"),i=b("a");if(a[l]=z[u][1],a[m](T,e),i.href="javascript:;",i.title=(z.text[0]||"")[c](/%s/g,e),i[x]("click",function(e){var t=this,n=t[f],a=t[f][k](T);n[f][p](n),$.reset(a),Q(),e[y]()},!1),a[v](i),L[o]="",L[h][o]=R,$.tags[e]){if(n)j[d][w](a,M);else if(z.alert){$.error=1;var r=(z.text[1]||e)[c](/%s/g,e);"function"==typeof z.alert?z.alert(r,e,$):alert(r)}}else $.tags[e]=1,j[d][w](a,M);return t.value=C($.tags).join(z.join),!n&&z.update($),$},function(){return L[x]("blur",function(){$.error=0,$.set(this[r])},!1),L[x]("paste",B,!1),L[x]("keydown",function(e){$.error=0;var b,t=this,n=e.keyCode,a=j,l=(e.key||String.fromCharCode(n))[s](),u=e.ctrlKey,c=e.shiftKey,d=M[g]&&M[g][k](T),v=L[h],w="tab"===l||!c&&9===n,p="enter"===l||!c&&13===n,m=" "===l||!c&&32===n,x="backspace"===l||!c&&8===n;if(!u&&p){for(;a=a[f];)if("form"===a.nodeName[s]()){b=a;break}$.set(t[r]),0===$.error&&b&&b.submit()}else if(u&&("v"===l||!c&&86===n))B();else if(!t[r]&&x)$.reset(d),Q();else{var P,O,C=z.escape;for(I in C)if(P=C[I],O="s"===P,(O||"	"===P)&&w||(O||"\n"===P)&&p||(O||" "===P)&&m)return i(function(){$.set(t[r]),Q()},1),void e[y]();i(function(){var e=t[r];for(v[o]=e?"":R,I=0,_=C.length;_>I;++I)if(C[I]&&-1!==e.indexOf(C[I])){$.set(e.split(C[I]).join(""));break}},1)}},!1),$}(),$.update(t.value.split(z.join),1),$.config=z,$.input=M,$.view=j,$.target=$.output=t})}(window,document,"TIB");