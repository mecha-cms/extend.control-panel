!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},r={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1};e.defineMode("xml",function(i,n){function f(e,t){function r(r){return t.tokenize=r,r(e,t)}var i=e.next();if("<"==i)return e.eat("!")?e.eat("[")?e.match("CDATA[")?r(m("atom","]]>")):null:e.match("--")?r(m("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),r(h(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=m("meta","?>"),"meta"):(u=e.eat("/")?"closeTag":"openTag",t.tokenize=d,"tag bracket");if("&"==i){var n;return n=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),n?"atom":"error"}return e.eatWhile(/[^&<]/),null}function d(e,t){var r=e.next();if(">"==r||"/"==r&&e.eat(">"))return t.tokenize=f,u=">"==r?"endTag":"selfcloseTag","tag bracket";if("="==r)return u="equals",null;if("<"==r){t.tokenize=f,t.state=b,t.tagName=t.tagStart=null;var i=t.tokenize(e,t);return i?i+" tag error":"tag error"}return/[\'\"]/.test(r)?(t.tokenize=p(r),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function p(e){var t=function(t,r){for(;!t.eol();)if(t.next()==e){r.tokenize=d;break}return"string"};return t.isInAttribute=!0,t}function m(e,t){return function(r,i){for(;!r.eol();){if(r.match(t)){i.tokenize=f;break}r.next()}return e}}function h(e){return function(t,r){for(var i;null!=(i=t.next());){if("<"==i)return r.tokenize=h(e+1),r.tokenize(t,r);if(">"==i){if(1==e){r.tokenize=f;break}return r.tokenize=h(e-1),r.tokenize(t,r)}}return"meta"}}function g(e,t,r){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=r,(o.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function v(e){e.context&&(e.context=e.context.prev)}function y(e,t){for(var r;;){if(!e.context)return;if(r=e.context.tagName,!o.contextGrabbers.hasOwnProperty(r)||!o.contextGrabbers[r].hasOwnProperty(t))return;v(e)}}function b(e,t,r){return"openTag"==e?(r.tagStart=t.column(),x):"closeTag"==e?_:b}function x(e,t,r){return"word"==e?(r.tagName=t.current(),c="tag",C):(c="error",x)}function _(e,t,r){if("word"==e){var i=t.current();return r.context&&r.context.tagName!=i&&o.implicitlyClosed.hasOwnProperty(r.context.tagName)&&v(r),r.context&&r.context.tagName==i||o.matchClosing===!1?(c="tag",w):(c="tag error",k)}return c="error",k}function w(e,t,r){return"endTag"!=e?(c="error",w):(v(r),b)}function k(e,t,r){return c="error",w(e,t,r)}function C(e,t,r){if("word"==e)return c="attribute",S;if("endTag"==e||"selfcloseTag"==e){var i=r.tagName,n=r.tagStart;return r.tagName=r.tagStart=null,"selfcloseTag"==e||o.autoSelfClosers.hasOwnProperty(i)?y(r,i):(y(r,i),r.context=new g(r,i,n==r.indented)),b}return c="error",C}function S(e,t,r){return"equals"==e?M:(o.allowMissing||(c="error"),C(e,t,r))}function M(e,t,r){return"string"==e?T:"word"==e&&o.allowUnquoted?(c="string",C):(c="error",C(e,t,r))}function T(e,t,r){return"string"==e?T:C(e,t,r)}var a=i.indentUnit,o={},l=n.htmlMode?t:r;for(var s in l)o[s]=l[s];for(var s in n)o[s]=n[s];var u,c;return f.isInText=!0,{startState:function(e){var t={tokenize:f,state:b,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;u=null;var r=t.tokenize(e,t);return(r||u)&&"comment"!=r&&(c=null,t.state=t.state(u||r,e,t),c&&(r="error"==c?r+" error":c)),r},indent:function(t,r,i){var n=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+a;if(n&&n.noIndent)return e.Pass;if(t.tokenize!=d&&t.tokenize!=f)return i?i.match(/^(\s*)/)[0].length:0;if(t.tagName)return o.multilineTagIndentPastTag!==!1?t.tagStart+t.tagName.length+2:t.tagStart+a*(o.multilineTagIndentFactor||1);if(o.alignCDATA&&/<!\[CDATA\[/.test(r))return 0;var l=r&&/^<(\/)?([\w_:\.-]*)/.exec(r);if(l&&l[1])for(;n;){if(n.tagName==l[2]){n=n.prev;break}if(!o.implicitlyClosed.hasOwnProperty(n.tagName))break;n=n.prev}else if(l)for(;n;){var s=o.contextGrabbers[n.tagName];if(!s||!s.hasOwnProperty(l[2]))break;n=n.prev}for(;n&&n.prev&&!n.startOfLine;)n=n.prev;return n?n.indent+a:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:o.htmlMode?"html":"xml",helperType:o.htmlMode?"html":"xml",skipAttribute:function(e){e.state==M&&(e.state=C)}}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})});