!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";var t=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,r=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,i=/[*+-]\s/;e.commands.newlineAndIndentContinueMarkdownList=function(n){if(n.getOption("disableInput"))return e.Pass;for(var a=n.listSelections(),o=[],l=0;l<a.length;l++){var s=a[l].head,u=n.getStateAfter(s.line),c=u.list!==!1,f=0!==u.quote,d=n.getLine(s.line),p=t.exec(d);if(!a[l].empty()||!c&&!f||!p)return void n.execCommand("newlineAndIndent");if(r.test(d))/>\s*$/.test(d)||n.replaceRange("",{line:s.line,ch:0},{line:s.line,ch:s.ch+1}),o[l]="\n";else{var m=p[1],h=p[5],g=i.test(p[2])||p[2].indexOf(">")>=0?p[2].replace("x"," "):parseInt(p[3],10)+1+p[4];o[l]="\n"+m+g+h}}n.replaceSelections(o)}});