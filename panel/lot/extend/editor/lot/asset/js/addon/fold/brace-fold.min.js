!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.registerHelper("fold","brace",function(t,r){function a(a){for(var l=r.ch,s=0;;){var c=0>=l?-1:n.lastIndexOf(a,l-1);if(-1!=c){if(1==s&&c<r.ch)break;if(o=t.getTokenTypeAt(e.Pos(i,c+1)),!/^(comment|string)/.test(o))return c+1;l=c-1}else{if(1==s)break;s=1,l=n.length}}}var o,i=r.line,n=t.getLine(i),l="{",s="}",c=a("{");if(null==c&&(l="[",s="]",c=a("[")),null!=c){var d,p,u=1,f=t.lastLine();e:for(var h=i;f>=h;++h)for(var m=t.getLine(h),g=h==i?c:0;;){var v=m.indexOf(l,g),y=m.indexOf(s,g);if(0>v&&(v=m.length),0>y&&(y=m.length),g=Math.min(v,y),g==m.length)break;if(t.getTokenTypeAt(e.Pos(h,g+1))==o)if(g==v)++u;else if(!--u){d=h,p=g;break e}++g}if(null!=d&&(i!=d||p!=c))return{from:e.Pos(i,c),to:e.Pos(d,p)}}}),e.registerHelper("fold","import",function(t,r){function i(r){if(r<t.firstLine()||r>t.lastLine())return null;var i=t.getTokenAt(e.Pos(r,1));if(/\S/.test(i.string)||(i=t.getTokenAt(e.Pos(r,i.end+1))),"keyword"!=i.type||"import"!=i.string)return null;for(var n=r,o=Math.min(t.lastLine(),r+10);o>=n;++n){var a=t.getLine(n),l=a.indexOf(";");if(-1!=l)return{startCh:i.end,end:e.Pos(n,l)}}}var a,n=r.line,o=i(n);if(!o||i(n-1)||(a=i(n-2))&&a.end.line==n-1)return null;for(var l=o.end;;){var s=i(l.line+1);if(null==s)break;l=s.end}return{from:t.clipPos(e.Pos(n,o.startCh+1)),to:l}}),e.registerHelper("fold","include",function(t,r){function i(r){if(r<t.firstLine()||r>t.lastLine())return null;var i=t.getTokenAt(e.Pos(r,1));return/\S/.test(i.string)||(i=t.getTokenAt(e.Pos(r,i.end+1))),"meta"==i.type&&"#include"==i.string.slice(0,8)?i.start+8:void 0}var n=r.line,o=i(n);if(null==o||null!=i(n-1))return null;for(var a=n;;){var l=i(a+1);if(null==l)break;++a}return{from:e.Pos(n,o+1),to:t.clipPos(e.Pos(a))}})});