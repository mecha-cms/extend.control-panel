!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,r){var n,i=e.getWrapperElement();return n=i.appendChild(document.createElement("div")),r?n.className="CodeMirror-dialog CodeMirror-dialog-bottom":n.className="CodeMirror-dialog CodeMirror-dialog-top","string"==typeof t?n.innerHTML=t:n.appendChild(t),n}function r(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}e.defineExtension("openDialog",function(i,n,a){function u(e){if("string"==typeof e)c.value=e;else{if(l)return;l=!0,o.parentNode.removeChild(o),s.focus(),a.onClose&&a.onClose(o)}}a||(a={}),r(this,null);var f,o=t(this,i,a.bottom),l=!1,s=this,c=o.getElementsByTagName("input")[0];return c?(c.focus(),a.value&&(c.value=a.value,a.selectValueOnOpen!==!1&&c.select()),a.onInput&&e.on(c,"input",function(e){a.onInput(e,c.value,u)}),a.onKeyUp&&e.on(c,"keyup",function(e){a.onKeyUp(e,c.value,u)}),e.on(c,"keydown",function(t){a&&a.onKeyDown&&a.onKeyDown(t,c.value,u)||((27==t.keyCode||a.closeOnEnter!==!1&&13==t.keyCode)&&(c.blur(),e.e_stop(t),u()),13==t.keyCode&&n(c.value,t))}),a.closeOnBlur!==!1&&e.on(c,"blur",u)):(f=o.getElementsByTagName("button")[0])&&(e.on(f,"click",function(){u(),s.focus()}),a.closeOnBlur!==!1&&e.on(f,"blur",u),f.focus()),u}),e.defineExtension("openConfirm",function(i,n,a){function f(){s||(s=!0,o.parentNode.removeChild(o),u.focus())}r(this,null);var o=t(this,i,a&&a.bottom),l=o.getElementsByTagName("button"),s=!1,u=this,c=1;l[0].focus();for(var d=0;d<l.length;++d){var p=l[d];!function(t){e.on(p,"click",function(r){e.e_preventDefault(r),f(),t&&t(u)})}(n[d]),e.on(p,"blur",function(){--c,setTimeout(function(){0>=c&&f()},200)}),e.on(p,"focus",function(){++c})}}),e.defineExtension("openNotification",function(i,n){function u(){o||(o=!0,clearTimeout(l),a.parentNode.removeChild(a))}r(this,u);var l,a=t(this,i,n&&n.bottom),o=!1,s=n&&"undefined"!=typeof n.duration?n.duration:5e3;return e.on(a,"click",function(t){e.e_preventDefault(t),u()}),s&&(l=setTimeout(u,s)),u})});